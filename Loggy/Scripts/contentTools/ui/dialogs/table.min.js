(function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};ContentTools.TableDialog=function(n){function i(n){this.table=n;this.table?i.__super__.constructor.call(this,"Update table"):i.__super__.constructor.call(this,"Insert table")}return t(i,n),i.prototype.mount=function(){var n,t,r,u,f,e,o;return i.__super__.mount.call(this),n={columns:3,foot:!1,head:!0},this.table&&(n={columns:this.table.firstSection().children[0].children.length,foot:this.table.tfoot(),head:this.table.thead()}),ContentEdit.addCSSClass(this._domElement,"ct-table-dialog"),ContentEdit.addCSSClass(this._domView,"ct-table-dialog__view"),o=["ct-section"],n.head&&o.push("ct-section--applied"),this._domHeadSection=this.constructor.createDiv(o),this._domView.appendChild(this._domHeadSection),f=this.constructor.createDiv(["ct-section__label"]),f.textContent=ContentEdit._("Table head"),this._domHeadSection.appendChild(f),this._domHeadSwitch=this.constructor.createDiv(["ct-section__switch"]),this._domHeadSection.appendChild(this._domHeadSwitch),this._domBodySection=this.constructor.createDiv(["ct-section","ct-section--applied","ct-section--contains-input"]),this._domView.appendChild(this._domBodySection),t=this.constructor.createDiv(["ct-section__label"]),t.textContent=ContentEdit._("Table body (columns)"),this._domBodySection.appendChild(t),this._domBodyInput=document.createElement("input"),this._domBodyInput.setAttribute("class","ct-section__input"),this._domBodyInput.setAttribute("maxlength","2"),this._domBodyInput.setAttribute("name","columns"),this._domBodyInput.setAttribute("type","text"),this._domBodyInput.setAttribute("value",n.columns),this._domBodySection.appendChild(this._domBodyInput),e=["ct-section"],n.foot&&e.push("ct-section--applied"),this._domFootSection=this.constructor.createDiv(e),this._domView.appendChild(this._domFootSection),u=this.constructor.createDiv(["ct-section__label"]),u.textContent=ContentEdit._("Table foot"),this._domFootSection.appendChild(u),this._domFootSwitch=this.constructor.createDiv(["ct-section__switch"]),this._domFootSection.appendChild(this._domFootSwitch),r=this.constructor.createDiv(["ct-control-group","ct-control-group--right"]),this._domControls.appendChild(r),this._domApply=this.constructor.createDiv(["ct-control","ct-control--text","ct-control--apply"]),this._domApply.textContent="Apply",r.appendChild(this._domApply),this._addDOMEventListeners()},i.prototype.save=function(){var n,t,i;return t=this._domFootSection.getAttribute("class"),i=this._domHeadSection.getAttribute("class"),n={columns:parseInt(this._domBodyInput.value),foot:t.indexOf("ct-section--applied")>-1,head:i.indexOf("ct-section--applied")>-1},this.dispatchEvent(this.createEvent("save",n))},i.prototype.unmount=function(){return i.__super__.unmount.call(this),this._domBodyInput=null,this._domBodySection=null,this._domApply=null,this._domHeadSection=null,this._domHeadSwitch=null,this._domFootSection=null,this._domFootSwitch=null},i.prototype._addDOMEventListeners=function(){var n;return i.__super__._addDOMEventListeners.call(this),n=function(n){return n.preventDefault(),this.getAttribute("class").indexOf("ct-section--applied")>-1?ContentEdit.removeCSSClass(this,"ct-section--applied"):ContentEdit.addCSSClass(this,"ct-section--applied")},this._domHeadSection.addEventListener("click",n),this._domFootSection.addEventListener("click",n),this._domBodySection.addEventListener("click",function(n){return function(){return n._domBodyInput.focus()}}(this)),this._domBodyInput.addEventListener("input",function(n){return function(t){var i;return i=/^[1-9]\d{0,1}$/.test(t.target.value),i?(ContentEdit.removeCSSClass(n._domBodyInput,"ct-section__input--invalid"),ContentEdit.removeCSSClass(n._domApply,"ct-control--muted")):(ContentEdit.addCSSClass(n._domBodyInput,"ct-section__input--invalid"),ContentEdit.addCSSClass(n._domApply,"ct-control--muted"))}}(this)),this._domApply.addEventListener("click",function(n){return function(t){var i;return t.preventDefault(),i=n._domApply.getAttribute("class"),i.indexOf("ct-control--muted")===-1?n.save():void 0}}(this))},i}(ContentTools.DialogUI)}).call(this);