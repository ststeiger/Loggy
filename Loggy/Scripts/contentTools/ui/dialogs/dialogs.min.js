(function(){var t={}.hasOwnProperty,n=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};ContentTools.AnchoredDialogUI=function(t){function i(){i.__super__.constructor.call(this);this._position=[0,0]}return n(i,t),i.prototype.mount=function(){return this._domElement=this.constructor.createDiv(["ct-widget","ct-anchored-dialog"]),this.parent().domElement().appendChild(this._domElement),this._contain(),this._domElement.style.top=""+this._position[1]+"px",this._domElement.style.left=""+this._position[0]+"px"},i.prototype.position=function(n){return n===void 0?this._position.slice():(this._position=n.slice(),this.isMounted()?(this._contain(),this._domElement.style.top=""+this._position[1]+"px",this._domElement.style.left=""+this._position[0]+"px"):void 0)},i.prototype._contain=function(){var n,t;if(this.isMounted())return n=this._domElement.getBoundingClientRect().width/2+5,t=document.documentElement.clientWidth||document.body.clientWidth,this._position[0]+n>t-n&&(this._position[0]=t-n),this._position[0]<n?this._position[0]=n:void 0},i}(ContentTools.WidgetUI);ContentTools.DialogUI=function(t){function i(n){n==null&&(n="");i.__super__.constructor.call(this);this._busy=!1;this._caption=n}return n(i,t),i.prototype.busy=function(n){return n===void 0?this._busy:this._busy===n?void 0:(this._busy=n,!this.isMounted())?void 0:this._busy?ContentEdit.addCSSClass(this._domElement,"ct-dialog--busy"):ContentEdit.removeCSSClass(this._domElement,"ct-dialog--busy")},i.prototype.caption=function(n){return n===void 0?this._caption:(this._caption=n,this._domCaption.textContent=ContentEdit._(n))},i.prototype.mount=function(){var i,n,t;return document.activeElement&&(document.activeElement.blur(),window.getSelection().removeAllRanges()),i=["ct-widget","ct-dialog"],this._busy&&i.push("ct-dialog--busy"),this._domElement=this.constructor.createDiv(i),this.parent().domElement().appendChild(this._domElement),t=this.constructor.createDiv(["ct-dialog__header"]),this._domElement.appendChild(t),this._domCaption=this.constructor.createDiv(["ct-dialog__caption"]),t.appendChild(this._domCaption),this.caption(this._caption),this._domClose=this.constructor.createDiv(["ct-dialog__close"]),t.appendChild(this._domClose),n=this.constructor.createDiv(["ct-dialog__body"]),this._domElement.appendChild(n),this._domView=this.constructor.createDiv(["ct-dialog__view"]),n.appendChild(this._domView),this._domControls=this.constructor.createDiv(["ct-dialog__controls"]),n.appendChild(this._domControls),this._domBusy=this.constructor.createDiv(["ct-dialog__busy"]),this._domElement.appendChild(this._domBusy)},i.prototype.unmount=function(){return i.__super__.unmount.call(this),this._domBusy=null,this._domCaption=null,this._domClose=null,this._domControls=null,this._domView=null},i.prototype._addDOMEventListeners=function(){return this._handleEscape=function(n){return function(t){if(!n._busy)return t.keyCode===27?n.dispatchEvent(n.createEvent("cancel")):void 0}}(this),document.addEventListener("keyup",this._handleEscape),this._domClose.addEventListener("click",function(n){return function(t){if(t.preventDefault(),!n._busy)return n.dispatchEvent(n.createEvent("cancel"))}}(this))},i.prototype._removeDOMEventListeners=function(){return document.removeEventListener("keyup",this._handleEscape)},i}(ContentTools.WidgetUI)}).call(this);